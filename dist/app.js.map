{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/Utils.js","webpack:///./src/js/ImageProcessor.js","webpack:///./src/js/Histogram.js","webpack:///./src/js/Session.js","webpack:///./src/main.js","webpack:///./src/js/FaceMess.js","webpack:///./src/js/WebCam.js","webpack:///./src/js/Data.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","unitStep","get1DPosition","colLength","x","y","getCoordinate","position","Math","floor","valuesArray","arrayOfObjects","values","total","length","push","FACE_WIDTH","FACE_HEIGHT","CANVAS_WIDTH","CAMERA_WIDTH","CAMERA_HEIGHT","CANVAS_HEIGHT","CAPTURE_HEIGHT","CAPTURE_WIDTH","FACE_FRAME","POINT_8","RADIUS_1","RADIUS_2","RGBA_SHIFT","NEIGHBOUR_SHIFT","WEIGHT_BLOCK","UNIFORM_BINARY_PATTERN","BLOCK_9_BY_9","CHI_RECOGNITION_DOF","CHI_RECOGNITION_BLOCKS_DOF","CHI_PREDICTION_DOF","utils","ImageProcessor","canvas","parameters","getContext","getImageData","width","height","data","dataLength","imageData","this","rgb2gray","context","radius","backupData","slice","index","sum","neighbourValue","centerPosition","centerValue","getGrayScaleValue","k","totalNeighbour","pow","clearRect","putImageData","extract8PointRadius1Feature","maxMatchBlock","observedBlockHistogram","totalBlock","concat","Histogram","uniformBinary","compareWithData","assign","Session","FACE_DATA","relativeData","type","maxMatch","difference","compareHistogram","bins","histogram","binLength","bin","frequency","normalized","init","isNotUniform","j","uniformLength","incrementHistogramFrequency","firstHistogram","secondHistogram","weightedChiSquare","totalFrequencies","totalNormalizedValue","round","has","area","blocks","put","sessionStorage","val","JSON","stringify","key2","undefined","parse","FaceMess","createWithImage","faceMess","createById","webCamIcon","document","querySelector","getElementById","addEventListener","webcam","isActive","stopWebCam","setAttribute","startWebCam","input","style","display","onkeydown","event","keyCode","capture","capturedCanvas","WebCam","start","stop","src","image","Image","onload","scale","drawImage","file","match","browseImage","window","URL","createObjectURL","Blob","id","canvasObject","scaleV","scaleH","stream","cameraTimeout","video","createElement","capturedContext","navigator","mediaDevices","getUserMedia","constraints","webkitGetUserMedia","mozGetUserMedia","Promise","resolve","reject","Error","audio","then","srcObject","onloadedmetadata","play","draw","catch","flipHorizontal","drawRecognitionFrame","setTimeout","drawOutput","evaluateRecognition","clearTimeout","getTracks","generateHistogramValue","positionX","positionY","save","restore","beginPath","moveTo","lineTo","stroke","closePath","textAlign","font","fillStyle","fillText"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","export const FACE_WIDTH = 180;\nexport const FACE_HEIGHT = 180;\nexport const CAMERA_WIDTH = 640;\nexport const CAMERA_HEIGHT = 480;\nexport const CANVAS_WIDTH = 480;\nexport const CANVAS_HEIGHT = 480;\nexport const CAPTURE_HEIGHT = 180;\nexport const CAPTURE_WIDTH = 180;\nexport const FACE_FRAME = [(CANVAS_WIDTH - FACE_WIDTH) / 2, (CANVAS_HEIGHT - FACE_HEIGHT) / 2, FACE_WIDTH, FACE_HEIGHT];\n\nexport const POINT_8 = 8;\nexport const RADIUS_1 = 1;\nexport const RADIUS_2 = 2;\nexport const RGBA_SHIFT = 4;\nexport const NEIGHBOUR_SHIFT = 3;\nexport const WEIGHT_BLOCK = [0.15, 0.08, 0.15, 0.08, 0.15, 0.08, 0.08, 0.15, 0.08];\nexport const UNIFORM_BINARY_PATTERN = ['non', 0, 1, 2, 3, 4, 6, 7, 8, 12, 14, 15, 16, 24, 28, 30, 31, 32, 48, 56, 60, 62, 63, 64, 96, 112, 120, 124, 126, 127, 128, 129, 131, 135, 143, 159, 191, 192, 193, 195, 199, 207, 223, 224, 225, 227, 231, 239, 240, 241, 243, 247, 248, 249, 251, 252, 253, 254, 255];\nexport const BLOCK_9_BY_9 = [\n  [0, 0, CAPTURE_WIDTH / 3 + 1, CAPTURE_HEIGHT / 3 + 1],\n  [CAPTURE_WIDTH / 3 - 1, 0, CAPTURE_WIDTH / 3 + 2, CAPTURE_HEIGHT / 3 + 1],\n  [CAPTURE_WIDTH * 2 / 3 - 1, 0, CAPTURE_WIDTH + 1, CAPTURE_HEIGHT / 3 + 1],\n\n  [0, CAPTURE_HEIGHT / 3 - 1, CAPTURE_WIDTH / 3 + 1, CAPTURE_HEIGHT / 3 + 2],\n  [CAPTURE_WIDTH / 3 - 1, CAPTURE_HEIGHT / 3 - 1, CAPTURE_WIDTH / 3 + 2, CAPTURE_HEIGHT / 3 + 2],\n  [CAPTURE_WIDTH * 2 / 3 - 1, CAPTURE_HEIGHT / 3 - 1, CAPTURE_WIDTH + 1, CAPTURE_HEIGHT / 3 + 2],\n\n  [0, CAPTURE_HEIGHT * 2 / 3 - 1, CAPTURE_WIDTH / 3 + 1, CAPTURE_HEIGHT / 3 + 1],\n  [CAPTURE_WIDTH / 3 - 1, CAPTURE_HEIGHT * 2 / 3 - 1, CAPTURE_WIDTH / 3 + 2, CAPTURE_HEIGHT / 3 + 1],\n  [CAPTURE_WIDTH * 2 / 3 - 1, CAPTURE_HEIGHT * 2 / 3 - 1, CAPTURE_WIDTH + 1, CAPTURE_HEIGHT / 3 + 1]\n];\n\nexport const CHI_RECOGNITION_DOF = 0.02;\nexport const CHI_RECOGNITION_BLOCKS_DOF = 0.05;\nexport const CHI_PREDICTION_DOF = 0.1;\n\nexport function unitStep(n) {\n  if (n < 0) {\n    return 0;\n  } else if (n >= 0) {\n    return 1;\n  }\n}\n\nexport function get1DPosition(colLength, x, y) {\n  return x + y * colLength;\n}\n\nexport function getCoordinate(colLength, position) {\n  return {\n    x: position % colLength,\n    y: Math.floor(position / colLength)\n  };\n}\n\nexport function valuesArray(arrayOfObjects, key) {\n  const values = [];\n  for (let i = 0, total = arrayOfObjects.length; i < total; i++) {\n    if (arrayOfObjects[i].hasOwnProperty(key)) {\n      values.push(arrayOfObjects[i][key]);\n    }\n  }\n\n  return values;\n}\n","import Session from './Session';\nimport { FACE_DATA } from './Data';\nimport * as utils from './Utils';\nimport Histogram from './Histogram';\n\nclass ImageProcessor {\n  static getImageData(canvas, ...parameters) {\n    return parameters.length === 4\n      ? canvas.getContext('2d').getImageData(...parameters)\n      : canvas.getContext('2d').getImageData(0, 0, canvas.width, canvas.height);\n  }\n\n  static rgb2gray(data) {\n    for (let i = 0, dataLength = data.length; i < dataLength; i += 4) {\n      data[i] = data[i + 1] = data[i + 2] = data[i] * 0.3 + data[i + 1] * 0.59 + data[i + 2] * 0.11;\n    }\n\n    return data;\n  }\n\n  static rgbCanvas2grey(canvas) {\n    const imageData = this.getImageData(canvas);\n\n    return this.rgb2gray(imageData.data);\n  }\n\n  static getPixelValue(context, x, y) {\n    const pixel = context.getImageData(x, y, 1, 1);\n\n    return pixel.data[0];\n  }\n\n  static extract8PointRadius1Feature(canvas, radius = 1) {\n    const context = canvas.getContext('2d');\n    const imageData = this.getImageData(canvas);\n    const data = imageData.data;\n    const backupData = imageData.data.slice();\n\n    for (let y = 1; y < canvas.height - 1; y++) {\n      for (let x = 1, index = 0; x < canvas.width - 1; x++, index += 4) {\n        let sum = 0;\n        const neighbourValue = [];\n        const centerPosition = utils.get1DPosition(canvas.width, x, y) * utils.RGBA_SHIFT;\n        const centerValue = this.getGrayScaleValue(backupData, centerPosition);\n        neighbourValue[7] = this.getGrayScaleValue(backupData, utils.get1DPosition(canvas.width, x - radius, y - radius) * utils.RGBA_SHIFT) - centerValue;\n        neighbourValue[6] = this.getGrayScaleValue(backupData, utils.get1DPosition(canvas.width, x, y - radius) * utils.RGBA_SHIFT) - centerValue;\n        neighbourValue[5] = this.getGrayScaleValue(backupData, utils.get1DPosition(canvas.width, x + radius, y - radius) * utils.RGBA_SHIFT) - centerValue;\n        neighbourValue[4] = this.getGrayScaleValue(backupData, utils.get1DPosition(canvas.width, x + radius, y) * utils.RGBA_SHIFT) - centerValue;\n        neighbourValue[3] = this.getGrayScaleValue(backupData, utils.get1DPosition(canvas.width, x + radius, y + radius) * utils.RGBA_SHIFT) - centerValue;\n        neighbourValue[2] = this.getGrayScaleValue(backupData, utils.get1DPosition(canvas.width, x, y + radius) * utils.RGBA_SHIFT) - centerValue;\n        neighbourValue[1] = this.getGrayScaleValue(backupData, utils.get1DPosition(canvas.width, x - radius, y + radius) * utils.RGBA_SHIFT) - centerValue;\n        neighbourValue[0] = this.getGrayScaleValue(backupData, utils.get1DPosition(canvas.width, x - radius, y) * utils.RGBA_SHIFT) - centerValue;\n\n        for (let k = 0, totalNeighbour = neighbourValue.length; k < totalNeighbour; k++) {\n          sum += utils.unitStep(neighbourValue[k]) * Math.pow(2, k);\n        }\n        data[centerPosition] = data[centerPosition + 1] = data[centerPosition + 2] = sum;\n      }\n    }\n\n    context.clearRect(0, 0, canvas.width, canvas.height);\n    context.putImageData(imageData, 0, 0);\n  }\n\n  static getGrayScaleValue(data, position) {\n    return data[position] * 0.3 + data[position + 1] * 0.59 + data[position + 2] * 0.11;\n  }\n\n  static evaluateRecognition(canvas) {\n    this.extract8PointRadius1Feature(canvas);\n\n    /* let maxMatch = {\n      value: 1,\n      name: 'Unknown'\n    };*/\n    const maxMatchBlock = {\n      value: 1,\n      name: 'Unknown'\n    };\n    let observedBlockHistogram = [];\n    // let observedHistogram = Histogram.uniformBinary(this.getImageData(canvas));\n\n    for (let i = 0, totalBlock = utils.BLOCK_9_BY_9.length; i < totalBlock; i++) {\n      observedBlockHistogram = observedBlockHistogram.concat(utils.valuesArray(Histogram.uniformBinary(this.getImageData(canvas, ...utils.BLOCK_9_BY_9[i])), 'normalized'));\n    }\n\n    // this.compareWithData(utils.valuesArray(observedHistogram, 'normalized'), Object.assign({}, Session.get('data'), FACE_DATA), 'area', maxMatch);\n    this.compareWithData(observedBlockHistogram, Object.assign({}, Session.get('data'), FACE_DATA), 'blocks', maxMatchBlock);\n\n    if (maxMatchBlock.value < utils.CHI_RECOGNITION_BLOCKS_DOF) {\n      return maxMatchBlock;\n    }\n  }\n\n  static compareWithData(relativeData, data, type, maxMatch) {\n    for (const key in data) {\n      if (data.hasOwnProperty(key)) {\n        const difference = Histogram.compareHistogram(relativeData, data[key][type]);\n        if (difference < maxMatch.value) {\n          maxMatch.name = key;\n          maxMatch.value = difference;\n        }\n      }\n    }\n  }\n}\n\nexport default ImageProcessor;\n","import Session from './Session';\nimport * as utils from './Utils';\nimport ImageProcessor from './ImageProcessor';\n\nclass Histogram {\n  static init(bins) {\n    const histogram = [];\n\n    for (let i = 0, binLength = bins.length; i < binLength; i++) {\n      histogram.push({\n        bin: bins[i],\n        frequency: 0,\n        normalized: 0\n      });\n    }\n\n    return histogram;\n  }\n\n  static uniformBinary(imageData) {\n    const data = imageData.data;\n    const histogram = this.init(utils.UNIFORM_BINARY_PATTERN);\n    for (let i = 0, dataLength = data.length; i < dataLength; i += 4) {\n      let isNotUniform = true;\n      for (let j = 1, uniformLength = utils.UNIFORM_BINARY_PATTERN.length; j < uniformLength; j++) {\n        if (utils.UNIFORM_BINARY_PATTERN[j] === data[i]) {\n          this.incrementHistogramFrequency(histogram, j, dataLength);\n          isNotUniform = false;\n          break;\n        }\n      }\n      if (isNotUniform) {\n        this.incrementHistogramFrequency(histogram, 0, dataLength);\n      }\n    }\n    // console.log(this.isNormalized(histogram, data.length));\n\n    return histogram;\n  }\n\n  static incrementHistogramFrequency(histogram, index, dataLength) {\n    histogram[index].frequency++;\n    histogram[index].normalized = histogram[index].frequency / (dataLength / 4);\n  }\n\n  static compareHistogram(firstHistogram, secondHistogram) {\n    return this.weightedChiSquare(firstHistogram, secondHistogram);\n  }\n\n  static chiSquare(firstHistogram, secondHistogram) {\n    const total = firstHistogram.length;\n    let sum = 0;\n    for (let i = 0; i < total; i++) {\n      sum += Math.pow(firstHistogram[i] - secondHistogram[i], 2) / secondHistogram[i];\n    }\n\n    return sum;\n  }\n\n  static weightedChiSquare(firstHistogram, secondHistogram) {\n    const total = firstHistogram.length;\n    let sum = 0;\n    for (let i = 0, j = 0; i < total; i++) {\n      j = Math.floor(i / utils.UNIFORM_BINARY_PATTERN.length);\n      sum +=\n        (utils.WEIGHT_BLOCK[j] * Math.pow(firstHistogram[i] - secondHistogram[i], 2)) /\n        (firstHistogram[i] + secondHistogram[i]);\n    }\n\n    return sum;\n  }\n\n  static isNormalized(histogram, dataLength) {\n    let totalFrequencies = 0,\n      totalNormalizedValue = 0;\n    for (let k = 1; k < histogram.length; k++) {\n      totalFrequencies += histogram[k].frequency;\n      totalNormalizedValue += histogram[k].normalized;\n    }\n\n    return totalFrequencies === dataLength / 4 && Math.round(totalNormalizedValue) === 1;\n  }\n\n  static generateHistogramValue(canvas, name) {\n    let data = {},\n      observedBlockHistogram = [];\n    if (Session.has()) {\n      data = Session.get('data');\n    }\n\n    for (let i = 0, totalBlock = utils.BLOCK_9_BY_9.length; i < totalBlock; i++) {\n      observedBlockHistogram = observedBlockHistogram.concat(\n        utils.valuesArray(\n          Histogram.uniformBinary(ImageProcessor.getImageData(canvas, ...utils.BLOCK_9_BY_9[i])),\n          'normalized'\n        )\n      );\n    }\n\n    data[name] = {\n      area: utils.valuesArray(this.uniformBinary(ImageProcessor.getImageData(canvas)), 'normalized'),\n      blocks: observedBlockHistogram\n    };\n    Session.put('data', data);\n  }\n}\n\nexport default Histogram;\n","class Session {\n  static has() {\n    return !!sessionStorage.length;\n  }\n\n  static put(key, val) {\n    sessionStorage[key] = JSON.stringify(val);\n  }\n\n  static get(key, key2) {\n    if (this.has()) {\n      if (key2 === undefined) {\n        return JSON.parse(sessionStorage[key]);\n      }\n\n      return JSON.parse(sessionStorage[key])[key2];\n    }\n\n    return null;\n  }\n}\n\nexport default Session;\n","import FaceMess from './js/FaceMess';\n\nFaceMess.createWithImage('camera', 'images/lenna.png');\n\nconst faceMess = FaceMess.createById('camera');\nconst webCamIcon = document.querySelector('#webCam .fa');\n\ndocument.getElementById('webCam').addEventListener('click', () => {\n  if (faceMess.webcam.isActive) {\n    faceMess.stopWebCam();\n    webCamIcon.setAttribute('class', 'fa fa-play fa-2x');\n  } else {\n    faceMess.startWebCam();\n    webCamIcon.setAttribute('class', 'fa fa-pause fa-2x');\n  }\n});\n\ndocument.getElementById('capture').addEventListener('click', () => {\n  if (faceMess.webcam.isActive) {\n    const input = document.querySelector('.name input');\n    faceMess.stopWebCam();\n    webCamIcon.setAttribute('class', 'fa fa-play fa-2x');\n    input.style.display = 'block';\n    input.onkeydown = (event) => {\n      if (event.keyCode === 13) { // Enter\n        faceMess.capture(input.value);\n        input.style.display = 'none';\n        input.value = '';\n      }\n    };\n  }\n});\n","import WebCam from './WebCam';\nimport * as utils from './Utils';\nimport ImageProcessor from './ImageProcessor';\n\nclass FaceMess {\n  constructor(canvas) {\n    this.canvas = canvas;\n    this.width = this.canvas.width;\n    this.height = this.canvas.height;\n    this.capturedCanvas = document.getElementById('capturedImage');\n    this.capturedCanvas.width = utils.CAPTURE_WIDTH;\n    this.capturedCanvas.height = utils.CAPTURE_HEIGHT;\n    this.webcam = new WebCam(this.canvas, this.capturedCanvas);\n  }\n\n  static createById(id) {\n    const canvas = document.getElementById(id);\n    canvas.height = utils.CANVAS_HEIGHT;\n    canvas.width = utils.CANVAS_WIDTH;\n\n    return new FaceMess(canvas);\n  }\n\n  static createWithImage(id, src) {\n    const canvasObject = FaceMess.createById(id);\n    canvasObject.browseImage(src);\n\n    return canvasObject;\n  }\n\n  startWebCam() {\n    return this.webcam.start();\n  }\n\n  stopWebCam() {\n    return this.webcam.stop();\n  }\n\n  capture(name) {\n    this.webcam.capture(name);\n  }\n\n  browseImage(src) {\n    const image = new Image();\n    image.src = src;\n    image.onload = () => {\n      const scale = utils.CAPTURE_WIDTH / image.width;\n      const context = this.capturedCanvas.getContext('2d');\n      context.clearRect(0, 0, utils.CAPTURE_WIDTH, utils.CAPTURE_HEIGHT);\n      context.drawImage(\n        image,\n        0,\n        (utils.CAPTURE_HEIGHT - image.height * scale) / 2,\n        utils.CAPTURE_WIDTH,\n        image.height * scale\n      );\n      ImageProcessor.extract8PointRadius1Feature(this.capturedCanvas);\n    };\n  }\n\n  handleLocalFile(file) {\n    if (file.type.match(/image.*/)) {\n      this.browseImage(window.URL.createObjectURL(new Blob(file, { type: 'application/zip' })));\n    }\n  }\n}\n\nexport default FaceMess;\n","import * as utils from './Utils';\nimport Histogram from './Histogram';\nimport ImageProcessor from './ImageProcessor';\n\nclass WebCam {\n  constructor(canvas, capturedCanvas) {\n    this.scaleV = 1;\n    this.scaleH = -1;\n    this.stream = '';\n    this.isActive = false;\n    this.cameraTimeout = '';\n    this.video = document.createElement('video');\n\n    this.canvas = canvas;\n    this.capturedCanvas = capturedCanvas;\n    this.context = this.canvas.getContext('2d');\n    this.capturedContext = this.capturedCanvas.getContext('2d');\n  }\n\n  start() {\n    if (navigator.mediaDevices === undefined) {\n      navigator.mediaDevices = {};\n    }\n\n    // Some browsers partially implement mediaDevices. We can't just assign an object\n    // with getUserMedia as it would overwrite existing properties.\n    // Here, we will just add the getUserMedia property if it's missing.\n    if (navigator.mediaDevices.getUserMedia === undefined) {\n      navigator.mediaDevices.getUserMedia = function(constraints) {\n        // First get ahold of the legacy getUserMedia, if present\n        const getUserMedia = navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n\n        // Some browsers just don't implement it - return a rejected promise with an error\n        // to keep a consistent interface\n        if (!getUserMedia) {\n          return Promise.reject(new Error('getUserMedia is not implemented in this browser'));\n        }\n\n        // Otherwise, wrap the call to the old navigator.getUserMedia with a Promise\n        return new Promise(function(resolve, reject) {\n          getUserMedia.call(navigator, constraints, resolve, reject);\n        });\n      };\n    }\n\n    if (navigator.mediaDevices.getUserMedia) {\n      navigator.mediaDevices\n        .getUserMedia({\n          video: true,\n          audio: false\n        })\n        .then(stream => {\n          this.stream = stream;\n\n          if ('srcObject' in this.video) {\n            this.video.srcObject = stream;\n          } else {\n            // Avoid using this in new browsers, as it is going away.\n            this.video.src = window.URL.createObjectURL(stream);\n          }\n\n          this.video.onloadedmetadata = () => this.video.play();\n          this.isActive = true;\n\n          draw();\n        })\n        .catch();\n    }\n\n    const draw = () => {\n      this.flipHorizontal();\n      this.drawRecognitionFrame();\n      this.capturedContext.drawImage(\n        this.canvas,\n        (utils.CANVAS_WIDTH - utils.FACE_WIDTH) / 2,\n        (utils.CANVAS_HEIGHT - utils.FACE_HEIGHT) / 2,\n        utils.FACE_WIDTH,\n        utils.FACE_HEIGHT,\n        0,\n        0,\n        this.capturedCanvas.width,\n        this.capturedCanvas.height\n      );\n\n      this.cameraTimeout = setTimeout(draw, 100, this.video, this.context);\n      this.drawOutput(ImageProcessor.evaluateRecognition(this.capturedCanvas));\n    };\n  }\n\n  stop() {\n    clearTimeout(this.cameraTimeout);\n    this.stream.getTracks()[0].stop();\n    this.isActive = false;\n  }\n\n  capture(name) {\n    this.capturedContext.clearRect(0, 0, this.capturedCanvas.width, this.capturedCanvas.height);\n    this.capturedContext.drawImage(\n      this.canvas,\n      ...utils.FACE_FRAME,\n      0,\n      0,\n      this.capturedCanvas.width,\n      this.capturedCanvas.height\n    );\n    ImageProcessor.extract8PointRadius1Feature(this.capturedCanvas);\n    Histogram.generateHistogramValue(this.capturedCanvas, name);\n  }\n\n  /**\n   * By default web cam video is opposite.\n   */\n  flipHorizontal() {\n    const positionX = (this.scaleH === 1 ? 0 : utils.CANVAS_WIDTH * -1) + (utils.CANVAS_WIDTH - utils.CAMERA_WIDTH) / 2;\n    const positionY =\n      (this.scaleV === 1 ? 0 : utils.CANVAS_HEIGHT * -1) + (utils.CANVAS_HEIGHT - utils.CAMERA_HEIGHT) / 2;\n    this.context.save();\n    this.context.scale(this.scaleH, this.scaleV);\n    this.context.drawImage(this.video, positionX, positionY);\n    this.context.restore();\n  }\n\n  /**\n   * Recognition frame is region where core feature extraction and recognition works.\n   */\n  drawRecognitionFrame() {\n    this.context.beginPath();\n    this.context.moveTo(utils.FACE_FRAME[0], utils.FACE_FRAME[1]);\n    this.context.lineTo(utils.FACE_FRAME[0] + utils.FACE_FRAME[2], utils.FACE_FRAME[1]);\n    this.context.lineTo(utils.FACE_FRAME[0] + utils.FACE_FRAME[2], utils.FACE_FRAME[1] + utils.FACE_FRAME[3]);\n    this.context.lineTo(utils.FACE_FRAME[0], utils.FACE_FRAME[1] + utils.FACE_FRAME[3]);\n    this.context.lineTo(utils.FACE_FRAME[0], utils.FACE_FRAME[1]);\n    this.context.stroke();\n    this.context.closePath();\n  }\n\n  drawOutput(maxMatch) {\n    if (maxMatch !== undefined) {\n      this.context.textAlign = 'center';\n      this.context.font = 'bold 20pt Calibri';\n      this.context.fillStyle = '#ffffff';\n      this.context.fillText(`You're`, this.canvas.width / 2, this.canvas.height / 2 - 20);\n      this.context.fillText(maxMatch.name, this.canvas.width / 2, this.canvas.height / 2 + 20);\n    }\n  }\n}\n\nexport default WebCam;\n","export const FACE_DATA = {\n};\n"],"sourceRoot":""}